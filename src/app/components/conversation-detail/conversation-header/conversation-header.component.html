<!-- 'background-color': stylesMap.get('backgroundColor'), 'color': stylesMap.get('foregroundColor'), 'background-image': stylesMap.get('themeColor')+','+ convertColorToRGBA(stylesMap.get('themeColor'), 50)+')' -->
<div class="c21-header"  [ngStyle]="{'background-image': stylesMap?.get('colorGradient') }">

  <div class="c21-header-container">

      <!-- CONTENT HEADER -->
      <div class="c21-header-content">

        <!-- ICON CLOSE CHAT -->
        <button [attr.disabled]="(isButtonsDisabled)?true:null" tabindex="-1" class="c21-header-button c21-right c21-close c21-button-clean" [ngStyle]="{'display': (hideHeaderCloseButton)?'none':'flex'}" (click)="returnCloseWidget()">
            <svg role="img" aria-labelledby="altIconTitle" [ngStyle]="{'fill': stylesMap?.get('foregroundColor') }" xmlns="http://www.w3.org/2000/svg"
                width="24px" height="24px" viewBox="0 0 24 24">
                <path fill="none" d="M0 0h24v24H0V0z" />
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" />
                <title id="altIconTitle">{{ translationMap?.get('BUTTON_CLOSE_TO_ICON') }}</title>
            </svg>
        </button>

        <!-- ICON MENU OPTION -->
        <button [attr.disabled]="(isButtonsDisabled)?true:null" tabindex="-1" class="c21-header-button c21-right c21-button-clean" [ngStyle]="{'display': (hideHeaderConversationOptionsMenu)?'none':'flex'}" (click)="toggleMenu()" > <!--(blur)="onBlurMenuOption($event)"-->
            <svg aria-labelledby="altIconTitle" [ngStyle]="{'fill': stylesMap?.get('foregroundColor') }" xmlns="http://www.w3.org/2000/svg"
                width="24" height="24" viewBox="0 0 24 24">
                <path fill="none" d="M0 0h24v24H0V0z" />
                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                <title id="altIconTitle">{{ translationMap?.get('OPTIONS') }}</title>
            </svg>
        </button>

        <!-- ICON BACK -->
        <button [attr.disabled]="(isButtonsDisabled)?true:null" tabindex="1530" aria-label=" indietro " class="c21-header-button c21-left c21-button-clean" (click)="returnHome()">
            <svg role="img" aria-labelledby="altIconTitle" [ngStyle]="{'fill': stylesMap?.get('foregroundColor') }" xmlns="http://www.w3.org/2000/svg"
                width="24px" height="24px" viewBox="0 0 24 24">
                <!-- <path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z"/> -->
                <path fill="none" d="M0 0h24v24H0V0z" />
                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z" />
                <title id="altIconTitle">{{ translationMap?.get('PREV_CONVERSATIONS') }}</title>
            </svg>
        </button>

        <!-- TITLE HEADER -->
        <div class="c21-title" [ngStyle]="{'color': stylesMap?.get('foregroundColor') }">
            <!-- <div *ngIf="g.project.logoChat !== 'nologo'" class='avatar-project' item-start>
                <div *ngIf="g.project.logoChat == 'tiledesklogo'" #avatarPlaceholder class="avatar-placeholder" [style.background-color]="g.project.color" [innerHTML]="g.project.avatar"></div>
                <div *ngIf="g.project.logoChat !== 'tiledesklogo'" #avatarImage class="avatar-image" [style.background-image]="'url(' + g.project.logoChat + ')'"></div>
            </div> -->
            <div class="titleText">{{widgetTitle}}</div>
        </div>

        <!-- <user-typing *ngIf="isTypings"
            [themeColor]="stylesMap?.get('foregroundColor')"
            [translationMap]="translationMap"
            [nameUserTypingNow]="nameUserTypingNow">
        </user-typing> -->
        <!-- <p *ngIf="isTypings" class="c21-header-writing" [ngStyle]="{'color': g.themeForegroundColor}">{{writingMessage}}</p> -->
      </div>

  </div>

</div>

<div *ngIf="isMenuShow" id="c21-options-menu" [ngStyle]="{ 'border-top': '2.4px solid', 'border-top-color': convertColorToRGBA(stylesMap?.get('themeColor'), 50), 'color': stylesMap?.get('themeColor') }">
    <!-- ICON VOLUME -->
    <div class="c21-header-button c21-right" (click)="toggleSound()">
      <svg *ngIf="!soundEnabled" aria-labelledby="altIconTitle" [ngStyle]="{'fill': g.themeColor }" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g id="Iconly">
        <g id="Volume Off">
        <g id="Group 3">
        <mask id="mask0_37238_437452" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="3" y="4" width="13" height="14">
        <path id="Clip 2" fill-rule="evenodd" clip-rule="evenodd" d="M3 4.60104H15.0337V17.7873H3V4.60104Z" fill="white"/>
        </mask>
        <g mask="url(#mask0_37238_437452)">
        <path id="Fill 1" fill-rule="evenodd" clip-rule="evenodd" d="M12.2305 6.1113C11.3645 6.1113 10.2515 7.0273 9.32551 7.7893C8.43551 8.5213 7.73351 9.0993 7.02851 9.1553C6.71351 9.1793 6.44351 9.1903 6.20551 9.1993C5.46651 9.2263 5.27951 9.2443 4.94751 9.5283C4.49451 9.9153 4.49851 11.4633 4.50051 12.3873L4.50151 12.6333L4.50051 12.8803C4.49851 13.8043 4.49451 15.3523 4.94751 15.7393C5.28651 16.0293 5.47851 16.0473 6.23551 16.0733C6.46451 16.0813 6.72351 16.0903 7.02251 16.1113C7.10851 16.1173 7.19651 16.1313 7.28651 16.1533L13.5245 9.9153C13.4515 7.6903 13.2265 6.6923 12.6965 6.2183C12.5525 6.1443 12.3965 6.1113 12.2305 6.1113ZM7.46351 17.7873C7.33451 17.7873 7.20551 17.7543 7.08851 17.6863C6.96851 17.6173 6.91351 17.6073 6.91351 17.6073C6.63751 17.5883 6.39751 17.5793 6.18351 17.5723C5.36751 17.5443 4.72251 17.5213 3.97251 16.8803C2.99251 16.0423 2.99651 14.2873 3.00051 12.8763L3.00151 12.6333L3.00051 12.3913C2.99651 10.9803 2.99251 9.2243 3.97351 8.3873C4.71351 7.7543 5.34751 7.7303 6.14851 7.7003C6.36951 7.6913 6.61851 7.6823 6.91051 7.6593C7.16151 7.6273 7.89051 7.0273 8.37251 6.6313C9.77851 5.4723 11.7055 3.8863 13.5075 4.9543C13.5405 4.9723 13.5715 4.9943 13.6005 5.0183C14.7245 5.9333 14.9645 7.4813 15.0335 10.1983C15.0385 10.4033 14.9595 10.6013 14.8135 10.7473L7.99451 17.5673C7.84951 17.7123 7.65751 17.7873 7.46351 17.7873Z" fill="#1D2347"/>
        </g>
        </g>
        <path id="Fill 4" fill-rule="evenodd" clip-rule="evenodd" d="M12.2329 20.666C11.2229 20.666 10.2639 20.081 9.55291 19.566C9.21691 19.324 9.14191 18.855 9.38391 18.52C9.62791 18.184 10.0969 18.107 10.4319 18.352C11.7449 19.301 12.3369 19.238 12.6959 19.05C13.2779 18.531 13.4989 17.363 13.5329 14.657C13.5389 14.243 13.8419 13.921 14.2929 13.917C14.7069 13.923 15.0389 14.263 15.0329 14.677C14.9949 17.632 14.7629 19.305 13.5999 20.25C13.5699 20.273 13.5399 20.295 13.5079 20.313C13.0839 20.564 12.6539 20.666 12.2329 20.666Z" fill="#1D2347"/>
        <g id="Group 8">
        <mask id="mask1_37238_437452" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="3" y="4" width="18" height="18">
        <path id="Clip 7" fill-rule="evenodd" clip-rule="evenodd" d="M3.00177 4.00024H20.5V21.5H3.00177V4.00024Z" fill="white"/>
        </mask>
        <g mask="url(#mask1_37238_437452)">
        <path id="Fill 6" fill-rule="evenodd" clip-rule="evenodd" d="M3.75152 21.5C3.55952 21.5 3.36752 21.427 3.22152 21.28C2.92852 20.987 2.92852 20.513 3.22152 20.22L19.2205 4.21999C19.5135 3.92699 19.9875 3.92699 20.2805 4.21999C20.5735 4.51299 20.5735 4.98699 20.2805 5.27999L4.28152 21.28C4.13552 21.427 3.94352 21.5 3.75152 21.5Z" fill="#1D2347"/>
        </g>
        </g>
        </g>
        </g>
      </svg>
      <svg *ngIf="soundEnabled" aria-labelledby="altIconTitle" [ngStyle]="{'fill': g.themeColor }" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g id="Iconly">
        <g id="Volume Up">
        <g id="Group 3">
        <mask id="mask0_37238_437578" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="2" y="5" width="13" height="16">
        <path id="Clip 2" fill-rule="evenodd" clip-rule="evenodd" d="M2.50012 5.0002H14.5201V20.5021H2.50012V5.0002Z" fill="white"/>
        </mask>
        <g mask="url(#mask0_37238_437578)">
        <path id="Fill 1" fill-rule="evenodd" clip-rule="evenodd" d="M11.7081 6.5061C10.8401 6.5061 9.73011 7.3871 8.80611 8.1211C7.91711 8.8261 7.21511 9.3841 6.51511 9.4361C6.20511 9.4581 5.93911 9.4681 5.70511 9.4761C4.95811 9.5011 4.76911 9.5181 4.43211 9.7961C3.99011 10.1591 3.99711 11.6421 4.00111 12.5271L4.00211 12.7481V12.7521L4.00111 12.9731C3.99711 13.8591 3.99011 15.3421 4.43211 15.7051C4.76811 15.9831 4.95711 15.9991 5.70211 16.0261C5.93711 16.0331 6.20411 16.0431 6.51511 16.0661C7.21511 16.1171 7.91711 16.6751 8.80611 17.3801C9.90911 18.2551 11.2751 19.3401 12.1811 18.8891C12.9391 18.2321 13.0201 16.4901 13.0201 12.7501C13.0201 9.0101 12.9391 7.2691 12.1811 6.6111C12.0341 6.5381 11.8751 6.5061 11.7081 6.5061ZM11.7181 20.5021C10.3271 20.5021 8.94811 19.4071 7.87411 18.5551C7.38911 18.1701 6.65611 17.5881 6.40311 17.5621C6.11611 17.5401 5.86811 17.5311 5.64911 17.5251C4.85111 17.4961 4.22011 17.4751 3.47811 16.8631C2.48611 16.0461 2.49511 14.3381 2.50111 12.9661L2.50211 12.7501L2.50111 12.5341C2.49511 11.1621 2.48611 9.4551 3.47811 8.6381C4.22111 8.0261 4.85311 8.0041 5.65311 7.9771C5.87111 7.9691 6.11811 7.9611 6.40511 7.9401C6.65611 7.9131 7.38911 7.3311 7.87411 6.9461C9.27311 5.8351 11.1891 4.3181 12.9741 5.3351C13.0051 5.3541 13.0361 5.3741 13.0641 5.3971C14.4581 6.4921 14.5201 8.5571 14.5201 12.7501C14.5201 16.9441 14.4581 19.0091 13.0641 20.1051C13.0361 20.1271 13.0051 20.1481 12.9731 20.1661C12.5591 20.4021 12.1381 20.5021 11.7181 20.5021Z" fill="#1D2347"/>
        </g>
        </g>
        <g id="Group 6">
        <mask id="mask1_37238_437578" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="19" y="5" width="4" height="15">
        <path id="Clip 5" fill-rule="evenodd" clip-rule="evenodd" d="M19.5839 5.90358H22.984V19.5959H19.5839V5.90358Z" fill="white"/>
        </mask>
        <g mask="url(#mask1_37238_437578)">
        <path id="Fill 4" fill-rule="evenodd" clip-rule="evenodd" d="M20.3336 19.5959C20.1856 19.5959 20.0366 19.5519 19.9056 19.4609C19.5656 19.2249 19.4816 18.7579 19.7186 18.4169C22.1116 14.9769 22.1116 10.5279 19.7186 7.0819C19.4816 6.7419 19.5656 6.2749 19.9066 6.0379C20.2466 5.8009 20.7126 5.8859 20.9496 6.2269C23.6626 10.1309 23.6626 15.3739 20.9496 19.2749C20.8036 19.4839 20.5706 19.5959 20.3336 19.5959Z" fill="#1D2347"/>
        </g>
        </g>
        <path id="Fill 7" fill-rule="evenodd" clip-rule="evenodd" d="M17.8306 17.1868C17.7036 17.1868 17.5756 17.1548 17.4576 17.0868C17.0986 16.8808 16.9746 16.4218 17.1806 16.0638C18.3516 14.0228 18.3516 11.4848 17.1806 9.4378C16.9746 9.0778 17.0996 8.6198 17.4586 8.4138C17.8186 8.2118 18.2756 8.3328 18.4816 8.6918C19.9166 11.1998 19.9166 14.3098 18.4816 16.8098C18.3426 17.0518 18.0906 17.1868 17.8306 17.1868Z" fill="#1D2347"/>
        </g>
        </g>
      </svg>
        <span *ngIf="!soundEnabled" class="label-menu-item"> {{ translationMap?.get('SOUND_OFF') }}</span>
        <span *ngIf="soundEnabled" class="label-menu-item"> {{ translationMap?.get('SOUND_ON')}}</span>
    </div>

    <!-- ICON TRANSCRIPT -->
    <div class="c21-header-button c21-right" *ngIf="isTrascriptDownloadEnabled" (click)="dowloadTranscript()">
        <svg role="img" aria-labelledby="altIconTitle" [ngStyle]="{'fill': stylesMap?.get('themeColor') }" xmlns="http://www.w3.org/2000/svg"
            width="20px" height="20px" viewBox="0 0 24 24">
            <!-- <path fill="none" d="M0 0h24v24H0V0z"/><path d="M13 5v6h1.17L12 13.17 9.83 11H11V5h2m2-2H9v6H5l7 7 7-7h-4V3zm4 15H5v2h14v-2z"/> -->
            <path fill="none" d="M0 0h24v24H0V0z" />
            <path d="M16 13h-3V3h-2v10H8l4 4 4-4zM4 19v2h16v-2H4z" />
            <title id="altIconTitle">{{ translationMap?.get('DOWNLOAD_TRANSCRIPT') }}</title>
        </svg>
        <span class="label-menu-item">{{ translationMap?.get('DOWNLOAD_TRANSCRIPT') }}</span>
    </div>

    <!-- ICON MAXIMIZE -->
    <!-- <div class="c21-header-button c21-right" *ngIf="heightStatus==='min'" (click)="maximizeMinimize('max')">
        <svg role="img" aria-labelledby="altIconTitle" [ngStyle]="{'fill': stylesMap?.get('themeColor') }" xmlns="http://www.w3.org/2000/svg"
            width="17" height="17" viewBox="0 0 62 62">
            <path d="M61,2H33a1,1,0,0,0-1,1V9a1,1,0,0,0,1,1H48.344L2.293,56.051a1,1,0,0,0,0,1.414l4.243,4.242a1,1,0,0,0,1.414,0L54,15.656V31a1,1,0,0,0,1,1h6a1,1,0,0,0,1-1V3A1,1,0,0,0,61,2Z"></path>
            <title id="altIconTitle">{{ translationMap?.get('MAXIMIZE') }}</title>
        </svg>
        <span class="label-menu-item">{{ translationMap?.get('MAXIMIZE') }}</span>
    </div> -->
    <!-- ICON MINIMIZE -->
    <!-- <div class="c21-header-button c21-right" *ngIf="heightStatus==='max'" (click)="maximizeMinimize('min')">
        <svg role="img" aria-labelledby="altIconTitle" [ngStyle]="{'fill': stylesMap?.get('themeColor') }" transform="rotate(180)" xmlns="http://www.w3.org/2000/svg"
            width="17" height="17" viewBox="0 0 62 62">
            <path d="M61,2H33a1,1,0,0,0-1,1V9a1,1,0,0,0,1,1H48.344L2.293,56.051a1,1,0,0,0,0,1.414l4.243,4.242a1,1,0,0,0,1.414,0L54,15.656V31a1,1,0,0,0,1,1h6a1,1,0,0,0,1-1V3A1,1,0,0,0,61,2Z"></path>
            <title id="altIconTitle">{{ translationMap?.get('MINIMIZE') }}</title>
        </svg>
        <span class="label-menu-item">{{ translationMap?.get('MINIMIZE') }}</span>
    </div> -->

  <!-- ICON EDIT PROFILE -->
  <!-- <div class="c21-header-button c21-right" *ngIf="messages && messages.length > 1">
      <svg role="img" aria-labelledby="altIconTitle" [ngStyle]="{'fill': g.themeForegroundColor }" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
          <path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          <title id="altIconTitle">{{BUTTON_EDIT_PROFILE}}</title>
      </svg>
  </div> -->
</div>
